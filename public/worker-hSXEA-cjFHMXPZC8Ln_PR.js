self.addEventListener("push",(i=>{if(i.data)try{const o=i.data.json();console.log("Push notification received:",o);const t=o.title||"LiveNotes",n={body:o.body||"You have a new notification",icon:o.icon||"/icons/icon-192x192.png",badge:o.badge||"/icons/icon-192x192.png",timestamp:o.timestamp,vibrate:[100,50,100],data:o.data||{}};i.waitUntil(self.registration.showNotification(t,n))}catch(i){console.error("Error processing push notification:",i)}else console.log("Push event with no data received")})),self.addEventListener("notificationclick",(i=>{console.log("Notification clicked:",i),i.notification.close();const o=i.notification.data||{};o.url&&i.waitUntil(clients.matchAll({type:"window"}).then((i=>{for(const t of i)if(t.url===o.url&&"focus"in t)return t.focus();if(clients.openWindow)return clients.openWindow(o.url)})))}));